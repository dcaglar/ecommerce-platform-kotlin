# ğŸ—‚ï¸ Folder Structure â€” `ecommerce-platform-kotlin`

This document provides a concise overview of the projectâ€™s multi-module structure, showing how each component fits into the payment, ledger, and observability pipeline.

---

```bash
ecommerce-platform-kotlin/
â”œâ”€â”€ charts/                               # ğŸ§­ Helm charts for Kubernetes deployment
â”‚   â”œâ”€â”€ payment-service/                  # Helm chart for REST API deployable
â”‚   â”œâ”€â”€ payment-consumers/                # Helm chart for Kafka worker deployable
â”‚   â””â”€â”€ payment-platform-config/          # Shared config, secrets, and values
â”‚
â”œâ”€â”€ common/                               # ğŸ” Shared contracts and utilities
â”‚   â”œâ”€â”€ src/main/kotlin/com/dogancaglar/common/
â”‚   â”‚   â”œâ”€â”€ event/                        # EventEnvelope, topics, group constants
â”‚   â”‚   â”œâ”€â”€ logging/                      # LogContext, MDC helpers
â”‚   â”‚   â””â”€â”€ tracing/                      # TraceId, ParentEventId propagation
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ docs/                                 # ğŸ“š Documentation and architecture references
â”‚   â”œâ”€â”€ architecture.md                   # Full system overview (payment + ledger)
â”‚   â”œâ”€â”€ how-to-start.md                   # Local setup and minikube deployment
â”‚   â”œâ”€â”€ folder-structure.md               # (this file)
â”‚   â””â”€â”€ cheatsheets.md                    # Troubleshooting, common commands
â”‚
â”œâ”€â”€ infra/                                # ğŸ§± Local infrastructure setup & scripts
â”‚   â”œâ”€â”€ helm-values/                      # Helm value overrides for local/CI/CD
â”‚   â”œâ”€â”€ keycloak/                         # Keycloak realm + client provisioning scripts
â”‚   â”‚   â”œâ”€â”€ provision-keycloak.sh
â”‚   â”‚   â”œâ”€â”€ get-token.sh
â”‚   â”‚   â””â”€â”€ output/
â”‚   â”œâ”€â”€ scripts/                          # Helper scripts for infra bootstrapping
â”‚   â”‚   â”œâ”€â”€ bootstrap-minikube-cluster.sh # Start Minikube profile + metrics-server
â”‚   â”‚   â”œâ”€â”€ deploy-all-local.sh           # Deploy core stack (DB, Redis, Kafka, Keycloak)
â”‚   â”‚   â”œâ”€â”€ deploy-monitoring-stack.sh    # Prometheus + Grafana (kube-prometheus-stack)
â”‚   â”‚   â”œâ”€â”€ deploy-kafka-exporter-local.sh# Kafka lag metrics for Prometheus
â”‚   â”‚   â”œâ”€â”€ deploy-payment-service-local.sh# Deploy REST API service
â”‚   â”‚   â”œâ”€â”€ deploy-payment-consumers-local.sh# Deploy Kafka worker consumers
â”‚   â”‚   â”œâ”€â”€ add-consumer-lag-metric.sh    # Prometheus adapter for lag-based HPA
â”‚   â”‚   â”œâ”€â”€ port-forwarding.sh            # Port-forward Keycloak, Grafana, Prometheus, DB
â”‚   â”‚   â””â”€â”€ deploy-observability-stack.sh # ELK (Elasticsearch + Logstash + Kibana)
â”‚   â””â”€â”€ endpoints.json                    # Generated by deploy scripts (Ingress host info)
â”‚
â”œâ”€â”€ load-tests/                           # âš™ï¸ k6 load test scripts for throughput validation
â”‚   â””â”€â”€ baseline-smoke-test.js
â”‚
â”œâ”€â”€ payment-domain/                       # ğŸ’¡ Core domain logic (pure Kotlin, no frameworks)
â”‚   â”œâ”€â”€ src/main/kotlin/com/dogancaglar/paymentservice/domain/
â”‚   â”‚   â”œâ”€â”€ model/                        # Aggregates, Value Objects (Payment, PaymentOrder)
â”‚   â”‚   â”œâ”€â”€ event/                        # Domain events (PaymentCreated, PaymentSucceeded)
â”‚   â”‚   â”œâ”€â”€ port/                         # Ports (Repository, EventPublisher, LedgerPort)
â”‚   â”‚   â”œâ”€â”€ exception/                    # Domain exceptions
â”‚   â”‚   â””â”€â”€ ledger/                       # Double-entry accounting domain (JournalEntry, Posting)
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ payment-application/                  # ğŸ§  Application layer (use cases, orchestration)
â”‚   â”œâ”€â”€ src/main/kotlin/com/dogancaglar/paymentservice/application/
â”‚   â”‚   â”œâ”€â”€ usecases/                     # RecordLedgerEntriesService, ProcessPaymentService
â”‚   â”‚   â”œâ”€â”€ schedulers/                   # OutboxDispatcherJob, RetryDispatcherScheduler
â”‚   â”‚   â””â”€â”€ workflow/                     # Payment orchestration logic
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ payment-infrastructure/               # ğŸ§© Adapters & auto-configuration
â”‚   â”œâ”€â”€ src/main/kotlin/com/dogancaglar/paymentservice/adapter/outbound
â”‚   â”‚   â”œâ”€â”€ persistence/                  # JPA & MyBatis repositories
â”‚   â”‚   â”œâ”€â”€ kafka/                        # Kafka producers, transactional templates
â”‚   â”‚   â”œâ”€â”€ redis/                        # Redis-based retry and ID generator
â”‚   â”‚   â”œâ”€â”€ psp/                          # PSP client simulation
â”‚   â”‚   â””â”€â”€ ledger/                       # LedgerPersistenceMapper, MyBatis mappers
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ payment-service/                      # ğŸŒ REST API for initiating payments
â”‚   â”œâ”€â”€ src/main/kotlin/com/dogancaglar/paymentservice/
â”‚   â”‚   â”œâ”€â”€ adapter/inbound/rest/         # Controllers and DTOs
â”‚   â”‚   â”œâ”€â”€ config/                       # Spring config (security, beans)
â”‚   â”‚   â””â”€â”€ scheduler/                    # OutboxDispatcher job beans
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ payment-consumers/                    # âš™ï¸ Async processing (Kafka-driven)
â”‚   â”œâ”€â”€ src/main/kotlin/com/dogancaglar/paymentservice/port/inbound/consumers/
â”‚   â”‚   â”œâ”€â”€ PaymentOrderEnqueuer.kt       # Consumes PaymentOrderCreated â†’ PSP call request
â”‚   â”‚   â”œâ”€â”€ PaymentOrderPspCallExecutor.kt# Performs PSP calls (mocked latency)
â”‚   â”‚   â”œâ”€â”€ PaymentOrderPspResultApplier.kt# Applies PSP results & publishes next events
â”‚   â”‚   â”œâ”€â”€ LedgerRecordingConsumer.kt    # Creates double-entry journals
â”‚   â”‚   â”œâ”€â”€ AccountBalanceConsumer.kt     # Aggregates balances from ledger entries
â”‚   â”‚   â””â”€â”€ base/                         # Abstract consumer base classes
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ tests/                                # ğŸ§ª Optional test resources (integration suites)
â”‚   â””â”€â”€ resources/
â”‚
â”œâ”€â”€ pom.xml                               # Maven parent POM (manages all modules)
â”œâ”€â”€ README.md                             # Project overview and diagrams
â””â”€â”€ LICENSE                               # License file (if applicable)