# minimal-values.yaml â€” tight dev caps (~70% node RAM target)

prometheusOperator:
  resources:
    requests: { cpu: 30m,  memory: 96Mi }
    limits:   { cpu: 150m, memory: 192Mi }
  admissionWebhooks:
    enabled: false
    patch:
      enabled: false
  tls:
    enabled: false

prometheus:
  prometheusSpec:
    containers:
      - name: config-reloader
        resources:
          requests: { cpu: 5m,  memory: 24Mi }
          limits:   { cpu: 30m, memory: 48Mi }
    # Prometheus server pod
    resources:
      requests: { cpu: 80m,  memory: 128Mi }
      limits:   { cpu: 300m, memory: 256Mi }   # tighter cap
    retention: 6h
    walCompression: true
    scrapeInterval: 60s
    evaluationInterval: 60s
    serviceMonitorSelector:
      matchLabels:
        release: prometheus-stack

alertmanager:
  alertmanagerSpec:
    containers:
      - name: config-reloader
        resources:
          requests: { cpu: 5m,  memory: 24Mi }
          limits:   { cpu: 30m, memory: 48Mi }
    resources:
      requests: { cpu: 30m, memory: 48Mi }
      limits:   { cpu: 150m, memory: 128Mi }

grafana:
  resources:
    requests: { cpu: 40m, memory: 96Mi }
    limits:   { cpu: 200m, memory: 256Mi }
  sidecar:
    datasources:
      resources:
        requests: { cpu: 5m,  memory: 24Mi }
        limits:   { cpu: 30m, memory: 48Mi }
    dashboards:
      resources:
        requests: { cpu: 5m,  memory: 24Mi }
        limits:   { cpu: 30m, memory: 48Mi }
kube-state-metrics:
  resources:
    requests: { cpu: 30m,  memory: 48Mi }
    limits:   { cpu: 150m, memory: 128Mi }

prometheus-node-exporter:
  resources:
    requests: { cpu: 15m,  memory: 24Mi }
    limits:   { cpu: 80m,  memory: 96Mi }


prometheusAdapter:
  enabled: false