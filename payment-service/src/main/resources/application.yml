kafka:
  dynamic-consumers:
    - id: payment-retry-executor
      topic: payment_order_retry_request_topic
      group-id: payment-retry-executor-group
      class-name: com.dogancaglar.paymentservice.adapter.kafka.consumers.PaymentOrderRetryCommandExecutor
    - id: payment-order-executor
      topic: payment_order_created_queue
      group-id: payment-order-group
      class-name: com.dogancaglar.paymentservice.adapter.kafka.consumers.PaymentOrderExecutor
    - id: payment-status-check-executor-scheduler
      topic: payment_status_check_scheduler_topic
      group-id: payment-status-check-executor-group
      class-name: com.dogancaglar.paymentservice.adapter.kafka.consumers.ScheduledPaymentStatusCheckExecutor
logging:
  level:
    org.springframework.boot.context.config: DEBUG
server:
  port: 8080
spring:
  kafka:
    consumer:
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: com.dogancaglar.paymentservice.config.serialization.EventEnvelopeDeserializer
  liquibase:
    change-log: classpath:db/changelog/changelog-master.xml
  jpa:
    hibernate:
      ddl-auto: none  # ❌ Disable automatic table creation
      open-in-view: false
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: http://myserver/realms/ecommerce-platform
psp:
  simulation:
    scenario: NORMAL

    scenarios:
      NORMAL:
        timeouts:
          enabled: true
          probability: 5    # 1% timeouts in normal
        latency:
          fast: 70     # 70% in 50–150ms
          moderate: 25     # 25% in 150–300ms
          slow: 5      # 5% in 300–600ms
        response:
          successful: 80
          retryable: 15
          statusCheck: 0
          nonRetryable: 5

      PEAK:
        timeouts:
          enabled: true
          probability: 5    # 5% timeouts at peak
        latency:
          fast: 40
          moderate: 40
          slow: 20
        response:
          successful: 95
          retryable: 3
          statusCheck: 1
          nonRetryable: 1

      DEGRADED:
        timeouts:
          enabled: true
          probability: 20   # 20% timeouts in outage
        latency:
          fast: 10
          moderate: 30
          slow: 60
        response:
          successful: 80
          retryable: 10
          statusCheck: 5
          nonRetryable: 5
payment-service:
  api-key: secretpaymentapikey12345
spring.jackson.time-zone: Europe/Amsterdam
spring.jpa.properties.hibernate.jdbc.time_zone: UTC
logging.config: classpath:logback-spring.xml

management:
  endpoints:
    web:
      exposure:
        include: prometheus,metrics,health,info
